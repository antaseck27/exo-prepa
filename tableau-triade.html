<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tri & Recherche</title>
<style>
  body{font-family:Arial;background:#f7fafc;display:grid;place-items:center;min-height:100vh}
  .wrap{background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.08);width:720px;max-width:95vw}
  input{width:100%;padding:10px;border:1px solid #ddd;border-radius:10px;margin-bottom:10px}
  table{width:100%;border-collapse:collapse}
  th,td{padding:10px;border-bottom:1px solid #eee;text-align:left;cursor:default}
  th.sortable{cursor:pointer}
</style>
</head>
<body>
<div class="wrap">
  <h1>Produits</h1>
  <input id="q" placeholder="Rechercher par nom...">
  <table>
    <thead>
      <tr>
        <th class="sortable" data-k="name">Nom</th>
        <th class="sortable" data-k="price">Prix</th>
        <th class="sortable" data-k="stock">Stock</th>
      </tr>
    </thead>
    <tbody id="rows"></tbody>
  </table>
</div>
<script>
  const data=[
    {name:'Adaptateur',price:3500,stock:12},
    {name:'Batterie',price:12000,stock:4},
    {name:'Chargeur',price:5000,stock:20},
    {name:'Lampe',price:2500,stock:8},
    {name:'CÃ¢ble',price:1500,stock:30}
  ];
  const rows=document.getElementById('rows');
  const q=document.getElementById('q');
  let sortKey='name', sortDir=1;

  function render(){
    const s=q.value.trim().toLowerCase();
    let arr=data.filter(x=>x.name.toLowerCase().includes(s));
    arr = arr.slice().sort((a,b)=>{
      if(a[sortKey]<b[sortKey]) return -1*sortDir;
      if(a[sortKey]>b[sortKey]) return 1*sortDir;
      return 0;
    });
    rows.innerHTML='';
    arr.forEach(x=>{
      const tr=document.createElement('tr');
      tr.innerHTML='<td>'+x.name+'</td><td>'+x.price+'</td><td>'+x.stock+'</td>';
      rows.append(tr);
    });
  }
  q.addEventListener('input', render);
  document.querySelectorAll('th.sortable').forEach(th=>{
    th.addEventListener('click', ()=>{
      const k=th.dataset.k;
      if(sortKey===k) sortDir*=-1; else { sortKey=k; sortDir=1; }
      render();
    });
  });
  render();
</script>
</body>
</html>
